import { getLocales } from 'react-native-localize';

export type Language = 'en' | 'de';

export const getCurrentLanguage = (): Language => {
  const locales = getLocales();
  const primaryLanguage = locales[0]?.languageCode;
  return primaryLanguage === 'de' ? 'de' : 'en';
};

export const translations = {
  en: {
    postCreate: {
      title: 'Create Post',
      titlePlaceholder: 'Give your item a title',
      titleRequired: 'Title is required',
      titleMinLength: 'Title must be at least 3 characters',
      titleMaxLength: 'Title must be less than 100 characters',
      description: 'Description',
      descriptionPlaceholder: 'Describe your item...',
      category: 'Category',
      categoryPlaceholder: 'Select a category',
      categoryRequired: 'Category is required',
      condition: 'Condition',
      conditionRequired: 'Condition is required',
      tags: 'Tags',
      tagsPlaceholder: 'Add tags...',
      location: 'Location',
      locationOptional: 'Location (optional)',
      pickupDate: 'Pickup Date',
      pickupDateOptional: 'Pickup Date (optional)',
      addPhotos: 'Add Photos',
      photosLimit: 'Up to 4 photos',
      reorderPhotos: 'Drag to reorder',
      deletePhoto: 'Delete photo',
      takePhoto: 'Take Photo',
      chooseFromLibrary: 'Choose from Library',
      cancel: 'Cancel',
      publish: 'Publish',
      publishing: 'Publishing...',
      discardTitle: 'Discard Post?',
      discardMessage: 'Are you sure you want to discard this post?',
      keepEditing: 'Keep Editing',
      discard: 'Discard',
      preview: 'Preview',
      educationTips: 'Education Tips',
      tip1: 'Add clear photos to increase interest',
      tip2: 'Accurate descriptions help others',
      tip3: 'Tags make your item easier to find',
      useCurrentLocation: 'Use Current Location',
      enterManually: 'Enter Manually',
      selectOnMap: 'Select on Map',
      success: 'Post published successfully!',
      error: 'Failed to publish post',
      uploadingImages: 'Uploading images...',
      offline: 'Post saved offline. Will publish when online.',
    },
    categories: {
      electronics: 'Electronics',
      toys: 'Toys',
      homeGoods: 'Home Goods',
      clothing: 'Clothing',
      furniture: 'Furniture',
      books: 'Books',
      sports: 'Sports & Outdoors',
      other: 'Other',
    },
    conditions: {
      new: 'New',
      likeNew: 'Like New',
      good: 'Good',
      fair: 'Fair',
      used: 'Used',
    },
    berlinTags: {
      sustainable: 'Sustainable',
      recycling: 'Recycling',
      reuse: 'Reuse',
      donation: 'Donation',
      free: 'Free',
      swap: 'Swap',
      upcycle: 'Upcycle',
      ecofriendly: 'Eco-Friendly',
      zerowaste: 'Zero Waste',
      circular: 'Circular Economy',
    },
    accessibility: {
      titleInput: 'Item title input',
      descriptionInput: 'Item description input',
      categoryPicker: 'Category picker',
      conditionPicker: 'Condition picker',
      tagInput: 'Tag input',
      addPhotoButton: 'Add photo button',
      removePhotoButton: 'Remove photo button',
      locationButton: 'Location selection button',
      datePickerButton: 'Pickup date picker button',
      publishButton: 'Publish post button',
      cancelButton: 'Cancel post creation button',
      previewCard: 'Post preview card',
      dragHandle: 'Drag to reorder image',
    },
  },
  de: {
    postCreate: {
      title: 'Beitrag erstellen',
      titlePlaceholder: 'Geben Sie Ihrem Artikel einen Titel',
      titleRequired: 'Titel ist erforderlich',
      titleMinLength: 'Titel muss mindestens 3 Zeichen lang sein',
      titleMaxLength: 'Titel muss weniger als 100 Zeichen lang sein',
      description: 'Beschreibung',
      descriptionPlaceholder: 'Beschreiben Sie Ihren Artikel...',
      category: 'Kategorie',
      categoryPlaceholder: 'Kategorie auswählen',
      categoryRequired: 'Kategorie ist erforderlich',
      condition: 'Zustand',
      conditionRequired: 'Zustand ist erforderlich',
      tags: 'Tags',
      tagsPlaceholder: 'Tags hinzufügen...',
      location: 'Standort',
      locationOptional: 'Standort (optional)',
      pickupDate: 'Abholdatum',
      pickupDateOptional: 'Abholdatum (optional)',
      addPhotos: 'Fotos hinzufügen',
      photosLimit: 'Bis zu 4 Fotos',
      reorderPhotos: 'Zum Neuordnen ziehen',
      deletePhoto: 'Foto löschen',
      takePhoto: 'Foto aufnehmen',
      chooseFromLibrary: 'Aus Bibliothek wählen',
      cancel: 'Abbrechen',
      publish: 'Veröffentlichen',
      publishing: 'Veröffentlichen...',
      discardTitle: 'Beitrag verwerfen?',
      discardMessage: 'Möchten Sie diesen Beitrag wirklich verwerfen?',
      keepEditing: 'Weiter bearbeiten',
      discard: 'Verwerfen',
      preview: 'Vorschau',
      educationTips: 'Bildungstipps',
      tip1: 'Fügen Sie klare Fotos hinzu, um das Interesse zu erhöhen',
      tip2: 'Genaue Beschreibungen helfen anderen',
      tip3: 'Tags machen Ihren Artikel leichter auffindbar',
      useCurrentLocation: 'Aktuellen Standort verwenden',
      enterManually: 'Manuell eingeben',
      selectOnMap: 'Auf Karte auswählen',
      success: 'Beitrag erfolgreich veröffentlicht!',
      error: 'Beitrag konnte nicht veröffentlicht werden',
      uploadingImages: 'Bilder hochladen...',
      offline: 'Beitrag offline gespeichert. Wird veröffentlicht, wenn online.',
    },
    categories: {
      electronics: 'Elektronik',
      toys: 'Spielzeug',
      homeGoods: 'Haushaltswaren',
      clothing: 'Kleidung',
      furniture: 'Möbel',
      books: 'Bücher',
      sports: 'Sport & Outdoor',
      other: 'Sonstiges',
    },
    conditions: {
      new: 'Neu',
      likeNew: 'Wie neu',
      good: 'Gut',
      fair: 'Akzeptabel',
      used: 'Gebraucht',
    },
    berlinTags: {
      sustainable: 'Nachhaltig',
      recycling: 'Recycling',
      reuse: 'Wiederverwenden',
      donation: 'Spende',
      free: 'Kostenlos',
      swap: 'Tauschen',
      upcycle: 'Upcycling',
      ecofriendly: 'Umweltfreundlich',
      zerowaste: 'Zero Waste',
      circular: 'Kreislaufwirtschaft',
    },
    accessibility: {
      titleInput: 'Artikeltitel-Eingabe',
      descriptionInput: 'Artikelbeschreibungs-Eingabe',
      categoryPicker: 'Kategorieauswahl',
      conditionPicker: 'Zustandsauswahl',
      tagInput: 'Tag-Eingabe',
      addPhotoButton: 'Foto hinzufügen Schaltfläche',
      removePhotoButton: 'Foto entfernen Schaltfläche',
      locationButton: 'Standortauswahl Schaltfläche',
      datePickerButton: 'Abholdatum Auswahl Schaltfläche',
      publishButton: 'Beitrag veröffentlichen Schaltfläche',
      cancelButton: 'Beitragserstellung abbrechen Schaltfläche',
      previewCard: 'Beitragsvorschau-Karte',
      dragHandle: 'Zum Neuordnen des Bildes ziehen',
    },
  },
};

export const t = (key: string, lang?: Language): string => {
  const language = lang || getCurrentLanguage();
  const keys = key.split('.');
  let value: any = translations[language];

  for (const k of keys) {
    value = value?.[k];
  }

  return value || key;
};
